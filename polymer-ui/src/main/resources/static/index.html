<!DOCTYPE html>
<html>
  <head>
    <!-- 1. Load platform support before any code that touches the DOM. -->
    <script src="js/bower_components/webcomponentsjs/webcomponents.min.js"></script>

	<link rel="import" href="js/bower_components/core-elements/core-elements.html">

    <!-- Custom Elements -->
	<link rel="import" href="elements/app-elements.html">
	<link rel="import" href="elements/authentication.html">
	<link rel="import" href="elements/login-elements.html">

    <link href="css/app.css" rel="stylesheet">
</head>

<body fullbleed vertical layout unresolved>

<template is="auto-binding" id="main-template">
<!-- Non-UI element to validate if the user is already logged in, and get user data. -->
<authentication-validator id="authValidator" user="{{user}}" csrfHeader="{{csrfHeader}}"></authentication-validator>

<core-scaffold>
  <core-header-panel navigation flex mode="seamed">
    <core-toolbar>Menu</core-toolbar>
    <core-menu selected="{{page}}" valueattr="main-display">
      <core-item main-display="login" icon="settings" label="Login"></core-item>
      <core-item main-display="main" icon="settings" label="Main"></core-item>
    </core-menu>
  </core-header-panel>
  <div tool horizontal layout justified flex>
	  <span flex>Polymer / Spring Demo</span>
	  <span>{{user.name}}</span>
	  <span><logout-element id="logoutElement" csrfHeader="{{csrfHeader}}" hidden></logout-element></span>
  </div>
  <div class="content">
    <core-pages id="pageSelector" selected="{{page}}" valueattr="page-name">
    <section page-name="login">
		<div>
			<p class="bubble">
				<b>Login to see your greeting</b><br>
				<login-element id="loginElement" csrfHeader="{{csrfHeader}}"></login-element>
			</p>
		</div>
    </section>
    <section page-name="main">
		<div>
			<p class="bubble">
			   <display-element id="displayElement"></display-element><br>
			</p>
		</div>
    </section>
    </core-pages>
  </div>
</core-scaffold>
</template>

<!-- Now that all the html has been processed, lets run some JavaScript
     to finish setting everything up in the template (eg: add event handlers). -->
<script src="js/app.js"></script>

</body>
</html>
